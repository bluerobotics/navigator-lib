<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Interface for the PWM peripheral."><title>rppal::pwm - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-cb6f1f67f1bcd037.css" id="mainThemeStyle"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="rppal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.73.0-nightly (864bdf784 2023-07-25)" data-channel="nightly" data-search-js="search-6dfdfced5eff6596.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-6d2c9675f3d09c26.css" data-theme-dark-css="dark-45ceb8f2e522f4d1.css" data-theme-ayu-css="ayu-fd19013d6ce078bf.css" ><script src="../../static.files/storage-db41da1a38ea3cb8.js"></script><script defer src="../../static.files/main-0795b7d26be81095.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../static.files/light-6d2c9675f3d09c26.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../static.files/dark-45ceb8f2e522f4d1.css"><link rel="stylesheet" href="../../static.files/noscript-cffde32267a19fd6.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../rppal/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../rppal/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module pwm</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">rppal</a>::<wbr><a class="mod" href="#">pwm</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/rppal/pwm.rs.html#21-491">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Interface for the PWM peripheral.</p>
<p>RPPAL controls the Raspberry Pi’s PWM peripheral through the <code>pwm</code> sysfs
interface.</p>
<h3 id="pwm-channels"><a href="#pwm-channels">PWM channels</a></h3>
<p>The BCM283x SoC supports two hardware PWM channels. By default, both channels
are disabled. To enable only PWM0 on its default pin (BCM GPIO 18, physical pin 12),
add <code>dtoverlay=pwm</code> to <code>/boot/config.txt</code> on Raspberry Pi OS or <code>boot/firmware/usercfg.txt</code> on
Ubuntu. If you need both PWM channels, replace <code>pwm</code> with <code>pwm-2chan</code>, which enables PWM0 on BCM
GPIO 18 (physical pin 12), and PWM1 on BCM GPIO 19 (physical pin 35). More details on enabling
and configuring PWM on other GPIO pins than the default ones can be found in
<code>/boot/overlays/README</code>.</p>
<p>The Raspberry Pi’s analog audio output uses both PWM channels. Playing audio and
simultaneously accessing a PWM channel may cause issues.</p>
<p>Some of the GPIO pins capable of supporting hardware PWM can also be configured for
use with other peripherals. Be careful not to enable two peripherals on the same pin
at the same time.</p>
<h3 id="using-pwm-without-superuser-privileges-sudo"><a href="#using-pwm-without-superuser-privileges-sudo">Using PWM without superuser privileges (<code>sudo</code>)</a></h3>
<p>As of kernel version 4.14.34, released on April 16 2018, it’s possible to
configure your Raspberry Pi to allow non-root access to PWM. 4.14.34 includes
a <a href="https://github.com/raspberrypi/linux/issues/1983">patch</a> that allows <code>udev</code> to change file permissions when a
PWM channel is exported. This will let any user that’s a member of the <code>gpio</code>
group configure PWM without having to use <code>sudo</code>.</p>
<p>The <code>udev</code> rules needed to make this work haven’t been patched in yet as of
June 2018, but you can easily add them yourself. Make sure you’re running
4.14.34 or later, and append the following snippet to
<code>/etc/udev/rules.d/99-com.rules</code>. Reboot the Raspberry Pi afterwards.</p>
<div class="example-wrap"><pre class="language-text"><code>SUBSYSTEM==&quot;pwm*&quot;, PROGRAM=&quot;/bin/sh -c &#39;\
    chown -R root:gpio /sys/class/pwm &amp;&amp; chmod -R 770 /sys/class/pwm;\
    chown -R root:gpio /sys/devices/platform/soc/*.pwm/pwm/pwmchip* &amp;&amp;\
    chmod -R 770 /sys/devices/platform/soc/*.pwm/pwm/pwmchip*\
&#39;&quot;
</code></pre></div><h3 id="troubleshooting"><a href="#troubleshooting">Troubleshooting</a></h3><h4 id="permission-denied"><a href="#permission-denied">Permission denied</a></h4>
<p>If <a href="struct.Pwm.html#method.new"><code>new</code></a> returns an <code>io::ErrorKind::PermissionDenied</code>
error, make sure <code>/sys/class/pwm</code> and all of its subdirectories
are owned by <code>root:gpio</code>, the current user is a member of the <code>gpio</code> group
and <code>udev</code> is properly configured as mentioned above. Alternatively, you can
launch your application using <code>sudo</code>.</p>
<h4 id="not-found"><a href="#not-found">Not found</a></h4>
<p>If <a href="struct.Pwm.html#method.new"><code>new</code></a> returns an <code>io::ErrorKind::NotFound</code> error, you may have
forgotten to enable the selected PWM channel. The configuration options
to enable either of the two PWM channels are listed above.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Pwm.html" title="struct rppal::pwm::Pwm">Pwm</a></div><div class="desc docblock-short">Provides access to the Raspberry Pi’s PWM peripheral.</div></li></ul><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Channel.html" title="enum rppal::pwm::Channel">Channel</a></div><div class="desc docblock-short">PWM channels.</div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum rppal::pwm::Error">Error</a></div><div class="desc docblock-short">Errors that can occur when accessing the PWM peripheral.</div></li><li><div class="item-name"><a class="enum" href="enum.Polarity.html" title="enum rppal::pwm::Polarity">Polarity</a></div><div class="desc docblock-short">Output polarities.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.Result.html" title="type rppal::pwm::Result">Result</a></div><div class="desc docblock-short">Result type returned from methods that can have <code>pwm::Error</code>s.</div></li></ul></section></div></main></body></html>